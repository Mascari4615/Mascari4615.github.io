---
title: "WitchMendokusai DevLog 00"
# description: ""
categories: [π«WitchMendokusai, π‹Dev-Log]
tags: [WitchMendokusai]
image: "{{ site.data.image-paths.works._witch-mendokusai.default-image }}"

date: 2024-03-18. 18:39
last_modified_at: 2024-08-29. 21:48
---

## π“€ _

---

μ¤λλ¶€ν„° κ°λ°μΌμ§€λ¥Ό μ“°κΈ°λ΅ λ§μλ¨Ήμ—λ‹¤.  
λ‚΄ μƒκ°μ΄λ‚ κ°λ° κ³Όμ •λ³΄λ‹¤λ” μƒκ° μ •λ¦¬, μλ£ μ •λ¦¬μ— μ§‘μ¤‘ν•  κ²ƒ κ°™λ‹¤.  

μ¤λμ€ ν€μ¤νΈ μ‹μ¤ν…μ„ κΈ°ν ν•΄λ³΄κΈ°λ΅ ν–λ‹¤.  

## π“€ ν€μ¤νΈ μ‹μ¤ν… κΈ°ν

---

### π’Ώ μ°Έκ³  1 : μΏ ν‚¤λ° ν‚Ήλ¤ - κ³°μ ¤λ¦¬ μ—΄μ°¨

μΏ ν‚¤λ° ν‚Ήλ¤μ—λ” κ³°μ ¤λ¦¬ μ—΄μ°¨λΌλ” κ±΄λ¬Όμ΄ μλ‹¤.  
κ³°μ ¤λ¦¬ μ—΄μ°¨λ” μ•„λ κΈ°λ¥μ„ ν•λ‹¤.

1. `μΌμ •μ‹κ°„λ§λ‹¤` μ—΄μ°¨κ°€ μ—­μ— λ“¤μ–΄μ¨λ‹¤.
2. μ—΄μ°¨λ§λ‹¤ μ„λ΅λ‹¤λ¥Έ `μ•„μ΄ν…μ„ μ”κµ¬`ν•λ‹¤.
3. μ—΄μ°¨μ— μ•„μ΄ν…μ„ `λ‚©ν’ν•λ©΄`, μ—΄μ°¨κ°€ μ—­μ„ λ– λ‚λ‹¤.
4. λ– λ‚ μ—΄μ°¨λ” `λλ¤ν• λ³΄μƒ`μ„ κ°€μ§€κ³  λμ•„μ¨λ‹¤.
5. λ°λ³µ

λ‚©ν’μ λ‚μ΄λ„κ°€ μ–΄λ ¤μΈμλ΅ λ” μΆ‹μ€ λ³΄μƒμ„ μ¤€λ‹¤.  
μ»¨ν…μΈ λ¥Ό μ§„ν–‰ν•λ©΄ μ—΄μ°¨μ μκ°€ λμ–΄λ‚λ‹¤.  

### π’Ώ μ°Έκ³  2 : μ‹μ¦ ν¨μ¤

μµκ·Ό λ‡ λ…„κ°„, μ—¬λ¬ κ²μ„μ—μ„ μ‚¬μ©ν•κΈ° μ‹μ‘ν• μ‹μ¤ν…μ΄λ‹¤.  

μ‹κ°„μ„ νΉμ • μ£ΌκΈ°λ¥Ό λ‚λ  μ‹μ¦μΌλ΅ κµ¬λ¶„μ‹ν‚¤κ³ , μ•„λ κΈ°λ¥μ„ μ κ³µν•λ‹¤.  

1. ν€μ¤νΈλ¥Ό μ¤€λ‹¤.
2. ν€μ¤νΈλ¥Ό μ™„λ£ν•λ©΄ ν¬μΈνΈλ¥Ό μ¤€λ‹¤.
3. ν¬μΈνΈλ¥Ό μΌμ •λ‰ λ¨μΌλ©΄ λ λ²¨μ΄ λμ–΄λ‚λ‹¤.
4. λ λ²¨λ§λ‹¤ λ³΄μƒμ„ λ°›μ„ μ μλ‹¤.

μ¬ν™”λ¥Ό μ£Όκ³  ν‹°μΌ“μ„ κµ¬λ§¤ν•λ©΄, λ λ²¨λ§λ‹¤ μ¶”κ°€μ μΈ λ³΄μƒμ„ μ–»μ„ μ μλ‹¤.  
ν€μ¤νΈλ” μΌμΌ, μ£Όκ°„, λλ¤ λ“± λ‹¤μ–‘ν•κ² μ£Όμ–΄μ§„λ‹¤.  

### π’Ώ μ°Έκ³  3

νΉμ • μ¤ν† λ¦¬λ‚ μ£Όμ λ¥Ό κ°€μ§€κ³  μ­‰ μ΄μ–΄μ§€λ” ν€μ¤νΈ (Like RPG, μ•„μ΄λ¬λΈμ»¤ν”Ό)  
μΌν€, μ£Όκ°„ν€ (Like RPG, μ›μ‹ )  

### π’Ώ μ¤κΉλ³΄μ

- μλΆ°λ¥Ό ν•΄κ²°ν•λ©΄ λ³΄μƒκ³Ό μλΆ° κ²½ν—μΉλ¥Ό λ°›μ
- μλΆ° κ²½ν—μΉλ¥Ό λ¨μ•„ μλΆ° λ λ²¨μ„ μ¬λ¦΄ μ μμ
- μλΆ° λ λ²¨μ΄ λ†’μ•„μ§μλ΅, λ†’μ€ λ“±κΈ‰μ μλΆ°λ¥Ό λ°›μ„ μ μκ³ , μ—¬λ¬ μλΆ°κ°€ ν•΄κΈλ¨

μλΆ° λ λ²¨μ„ μ„μλ΅ μ΅°μ •ν•μ—¬, μ›ν•λ” μλΆ°λ¥Ό μ§‘μ¤‘ν•μ—¬ λ°›μ„ μ μλ„λ΅  

- μλΆ° μΆ…λ¥
  - λ‹¨μ μλΆ° : μ „λ‹¬, λ€ν™”, νΈμ„, μ•„μ΄ν… μ”μ²­, λμ „ ν΄λ¦¬μ–΄, λΉ μ²μΉ, μƒνΈμ‘μ©
  - μ¤ν† λ¦¬ μλΆ° (λ©”μΈ, μ„λΈ, ν™•μ¥ν©) : μ¤ν† λ¦¬, λ€ν™”, μ»·μ”¬ + λ‹¨μ μλΆ°

## π“€ μΌλ‹¨ λ§λ“¤μ–΄λ³΄μ

---

μΏ ν‚¤λ° ν‚Ήλ¤μ κ³°μ ¤λ¦¬ μ—΄μ°¨ κ°™μ€ κΈ°λ¥μ„ λ¨Όμ € λ§λ“¤μ–΄λ³΄μ.  

κ·Όλ° λ§λ…€μ μ§‘μ—λ” μ—΄μ°¨κ°€ μ—†λ‹¤.  

μ£Όλ³€ λ§μ„μ— μλ” μλΆ° κ²μ‹νμ—μ„ μλΆ°λ¥Ό μ°Ύμ•„μ¤κΈ°λ΅ ν•μ.  
μλΆ°λ¥Ό μ°Ύμ•„μ¤κ³ , μ•„μ΄ν…μ„ μ „λ‹¬ν•λ” μΌμ€ λ¨λ‘ μΈν•μ΄ λ€μ‹  ν•΄μ¤„ κ²ƒμ΄λ‹¤.  

μΈν•μ€ ν”λ μ΄μ–΄λΈ” μΊλ¦­ν„°μ§€λ§,  
λ™μ‹μ— ν΄λμ‹μ¤λΈν΄λμ μ¥μΈκ³Ό κ°™μ€ μ—­ν• λ„ ν•΄μ¤„ κ²ƒμ΄λ‹¤.  
λ¶„μ¬ κ²μ„μ—μ„ λ§μ΄ λ³Έ κ²ƒ κ°™μ€ μ‹μ¤ν…μ΄λ‹¤.  

μ–΄μ¨λ“ ,  
κ±°λλ¦¬κ³  μλ” μΈν•μ„ κ΄€λ¦¬ν•λ” μ‹μ¤ν…κ³Ό UIκ°€ ν•„μ”ν•λ‹¤.  
μ΄λ¥Ό λ¨Όμ € λ§λ“¤μ–΄λ³΄μ.  

## π“€ μΈν• κ΄€λ¦¬

---

![κΈ°μ΅΄ μΈν• κ΄€λ¦¬ UI](/assets/img/post/stone/2024/240318_00.jpg)  

μ‚¬μ‹¤ μΈν• κ΄€λ¦¬ UIλ” μ΄λ―Έ μλ‹¤.  
ν•μ§€λ§ λμ „μ— λ“¤μ–΄κ° μΈν•μ„ μ„ νƒν•λ” κΈ°λ¥, μΈν•μ μ¥λΉ„λ¥Ό μ„ νƒν•λ” κΈ°λ¥λ§ μλ” μƒνƒλ‹¤.  

μ—¬κΈ°μ„ λ” ν•„μ”ν• κΈ°λ¥μ€ μ•„λμ™€ κ°™λ‹¤.  

- κ±°λλ¦¬λ” μΈν•μ μλ¥Ό ν‘μ‹
- κ±°λλ¦¬λ” μΈν• Slot λ‚μ—΄

κ°‘μκΈ° μƒκ°λ‚¬λ”λ°,  

ν”λ μ΄μ–΄λΈ” μΊλ¦­ν„°λ” μ•„λ‹μ§€λ§, μΌμ€ ν•  μ μλ” μΈν•μ΄ μμΌλ©΄ μΆ‹μ„ κ²ƒ κ°™λ‹¤.  
`λ”λ―Έ μΈν•`μ΄λΌκ³  λ¶€λ¥΄λ©΄ λ  κ²ƒ κ°™λ‹¤.  

μ¶”ν›„ μ΄λ° λ”λ―Έ μΈν•μ— νΌμ„ μ§‘μ–΄λ„£μ–΄μ„,  
ν”λ μ΄μ–΄λΈ” μΊλ¦­ν„°λ΅ μ§„ν™”μ‹ν‚¤λ” μ‹μΌλ΅ λ§λ“¤λ©΄ μΆ‹μ„ κ²ƒ κ°™λ‹¤.  

- λ”λ―Έ μΈν•

### π’Ώ λ”λ―Έ μΈν•

```cs
public class GameData
{
	// ~
	public int dummyDollCount = 1;
}
```

κΈ°μ΅΄ μΈν• μ •λ³΄λ¥Ό μ €μ¥ν•λ” κ²ƒμ²λΌ, λ”λ―Έ μΈν•λ„ μ •λ³΄λ¥Ό μ €μ¥ν•  ν•„μ”κ°€ μλ‹¤.  

μ΄λ•, λ”λ―Έ μΈν•μ€ λ¨λ‘ λ‘κ°™μ€ λ¨μµμΌλ΅ λ§λ“¤κ³  κ°μ„±μ„ μ£Όμ§€ μ•μ„ κ²ƒμ΄κΈ° λ•λ¬Έμ—,  
κΈ°μ΅΄ μΈν•μ²λΌ μΈν•μ΄ μ°©μ©ν•κ³  μλ” μ¥λΉ„ κ°™μ€ μ¶”κ°€ μ •λ³΄λ¥Ό μ €μ¥ν•  ν•„μ”κ°€ μ—†λ‹¤.  

κ·Έλμ„ λ‹¨μν `GameData`ν΄λμ¤μ— `dummyDollCount`λ³€μλ¥Ό μ¶”κ°€ν–λ‹¤.  

λ¨λ“  μΈν•μ„ μ‹¤μ²΄ν™”μ‹μΌ λ§µμ— λμ•„λ‹¤λ‹κ² ν•κ³  μ‹¶κΈ΄ ν•λ°, λ‹Ήμ¥ ν•„μ”ν•μ§„ μ•μ•„μ„ ν¨μ¤.  

### π’Ώ κ±°λλ¦¬λ” μΈν• ν‘μ‹

κ±°λλ¦¬κ³  μλ” μΈν•μ€ μ–΄λ–»κ² ν‘μ‹ν• κΉ?  

λ¨λ“  μΈν• μ •λ³΄λ¥Ό κ°€μ Έμ™€μ„ μΈλ²¤ν† λ¦¬ ν•μ‹μΌλ΅ λ§λ“¤κ³ ,  
κ±°λλ¦¬κ³  μλ” μΈν•λ§ ν™μ„±ν™”μ‹ν‚¤κΈ°λ΅ ν•μ.  

μƒλ΅ `UIDollBuffer : UIDataBuffer<Doll>` ν΄λμ¤λ¥Ό λ§λ“¤μ—λ‹¤.  
`UIDataBuffer<T>`λ” νΉμ • μ»¨ν…μ΄λ„μ— μλ” μ”μ†λ“¤μ„ `UISlot`μ— ν• λ‹Ήμ‹μΌ λ³΄μ—¬μ£Όλ”, λ‚΄κ°€ λ§λ“  ν΄λμ¤λ‹¤.  
μ΄λ¥Ό μƒμ† λ°›κ³ , λ”λ―Έ μΈν•κ³Ό ν•¨κ» κ±°λλ¦¬κ³  μλ” μΈν•λ§ ν‘μ‹ν•λ„λ΅ Overrideν–λ‹¤.  

μ„ μ‘μ—…μ€ κΈλ°© λλ‚¬λ”λ°,  
κΈ°μ΅΄ μΈν• κ΄€λ¦¬ UIμ— μλ κΈ°λ¥λ“¤μ„ μ®κΈ°κ³  μμ •ν•λλΌ μ‹κ°„μ„ μΆ€ λ¨Ήμ—λ‹¤.  

κΈ°μ΅΄μ—λ” λμ „μ— λ“¤μ–΄κ° μΈν• μ •λ³΄ ν•λ‚λ§ UIλ΅ λ³΄μ—¬μ¤¬λ‹¤.  
κ·Έλμ„ Prev/Next λ²„νΌμ„ λ„λ¥΄λ©΄ `selectedDollIndex` λ°μ΄ν„°λ¥Ό μμ •ν•κ³ , `dollDic[selectedDollIndex]`λ΅ μΈν• λ°μ΄ν„°λ¥Ό κ°€μ Έμ™€ UIλ¥Ό κ°±μ‹ ν–λ‹¤.  

ν•μ§€λ§ μ—¬λ¬ μΈν•μ„ λ¦¬μ¤νΈλ΅ λ‚μ—΄ν•κ² λλ©΄μ„, λμ „μ— λ“¤μ–΄κ° μΈν•μ΄ μ•„λ‹ λ‹¤λ¥Έ μΈν•μ μ •λ³΄λ„ UIμ— λ„μΈ μ μμ–΄μ•Ό ν–λ‹¤.  
κ·Έλμ„ `UIμ—μ„ λ§μ§€λ§‰μΌλ΅ μ„ νƒν• μΈν•μ Index`λ¥Ό κΈ°μ¤€μΌλ΅ UIλ¥Ό λ„μ°κ³ , ν‘μ‹λ μΈν•μ„ λμ „μ— λ“¤μ–΄κ° μΈν•μΌλ΅ μ„ νƒν•  μ μλ” λ²„νΌμ„ μƒλ΅ ν•λ‚ λ§λ“¤μ—λ‹¤.  

![μƒ μΈν• κ΄€λ¦¬ UI 0](/assets/img/post/stone/2024/240318_01.jpg)  
![μƒ μΈν• κ΄€λ¦¬ UI 1](/assets/img/post/stone/2024/240318_02.jpg)  

UIλ” μ¶”ν›„ λ” κΎΈλ©°λ³΄κΈ°λ΅.  

### π’Ώ κ±°λλ¦¬λ” μΈν• μ ν‘μ‹λ¥Ό ν•κΈ° μ„ν•΄μ„

ν΄λμ‹μ¤λΈν΄λ μ¥μΈμ²λΌ, μ—¬κΈ°μ„λ„ κ±°λλ¦¬κ³  μλ” μΈν• μλ¥Ό ν‘μ‹ν•λ©΄ μΆ‹μ„ κ²ƒ κ°™λ‹¤.  
λ©μ μ€ ν„μ¬ μΌμ„ μ‹ν‚¬ μ μλ” μΈν• μκ°€ μ–Όλ§λ‚ μκ³ , μΌμ„ ν•κ³  μΈν• μλ” μ–Όλ§λ‚ μλ”μ§€ μ•λ ¤μ£Όλ” κ²ƒ.  

μ—¬κΈ°μ„ μΆ€ κ³ λ―Όμ¤λ¬μ›μ§€λ”κ² μλ‹¤.  
μ–΄λ–¤ μΈν•μ΄ μ–΄λ–¤ μΌμ„ ν•κ³  μλ”μ§€ μ•κ³ μμ–΄μ•Ό ν•λ”λ°, μ”κ±΄ μ–΄λ–»κ² μ €μ¥ν• κΉ?  

λ”λ―ΈμΈν•λ§ μΌμ„ ν•λ‹¤κ³  κ°€μ •ν•λ‹¤λ©΄, μΌ μ •λ³΄λ¥Ό λ”°λ΅ μ €μ¥ν•λ©΄ λλ‹¤.  
λ”λ―ΈμΈν•μ λ¨μµμ€ λ¨λ‘ λ‘κ°™κΈ° λ•λ¬Έμ—, μΌ μ •λ³΄μ™€ λ”λ―ΈμΈν•μ„ λ‹¨μν μΈλ±μ¤ μμ„λ€λ΅ λ§¤μΉ­μ‹ν‚¤λ©΄ λλ‹¤.  

ν•μ§€λ§ ν”λ μ΄μ–΄λΈ” μΊλ¦­ν„°λ„ μΌν•λ” κ²ƒμ΄ κ°€λ¥ν•κ² λ§λ“¤κ³  μ‹¶λ‹¤.  
ν”λ μ΄μ–΄λΈ” μΊλ¦­ν„°κ°€ μΌμ„ ν•λ‹¤κ³  κ°€μ •ν•λ‹¤λ©΄, μΌ μ •λ³΄μ™€ ν”λ μ΄μ–΄λΈ” μΊλ¦­ν„°μ μ •λ³΄λ¥Ό λ§¤μΉ­μ‹μΌμ„ μ €μ¥ν•΄μ•Ό ν•λ‹¤.  
λ‘κ°™μ€ ν”λ μ΄μ–΄λΈ” μΊλ¦­ν„°λ¥Ό μ—¬λ¬ κΈ° κ°€μ§ μ μ—†κΈ° λ•λ¬Έμ—, ν”λ μ΄μ–΄λΈ” μΊλ¦­ν„°μ IDμ™€ μΌ μ •λ³΄λ¥Ό λ§¤μΉ­μ‹ν‚¤λ©΄ λλ‹¤.  

λ‘ λ‹¤ μΌμ„ ν•  μ μκ² ν•λ ¤λ©΄..  
μƒκ°ν•΄λ³΄λ‹ κ·Έλƒ¥ λ”λ―ΈμΈν• λ”°λ΅, ν”λ μ΄μ–΄λΈ” μΊλ¦­ν„° λ”°λ΅ μ €μ¥ν•λ©΄ λλ„¤ !  

### π’Ώ μΌ μ •λ³΄ μ €μ¥

μΌ μ •λ³΄λ¥Ό λ¨Όμ € λ§λ“¤μ–΄λ³΄μ.  

μΌμ νΉμ§•μ€ μ•„λμ™€ κ°™μ„ κ²ƒμ΄λ‹¤.  

- μ‹κ°„κ³Ό μ΄λ²¤νΈ μ •λ³΄λ¥Ό κ°€μ§€κ³  μλ‹¤.
- μΈκ²μ„ μ‹κ°„μ΄ μ§€λ‚λ©΄μ„, μλ™μΌλ΅ μ™„λ£λ„κ°€ μ§„ν–‰λλ‹¤.
- μ™„λ£λ„κ°€ 100% μ§„ν–‰λλ©΄ μ™„λ£λλ©°, μ΄λ²¤νΈκ°€ λ°μƒν•λ‹¤.

μ, μ΄λ²¤νΈλ¥Ό μ–΄λ–»κ² μ €μ¥ν•κ³  μ²λ¦¬ν• μ§€κ°€ κ³ λ―Όμ¤λ½λ‹¤.  
Action κ°™μ€ κ±Έ μ§λ ¬ν™” μ‹ν‚¬ μλ” μ—†μ„ κ²ƒ κ°™κ³ , λ‹¨μν `WorkType` Enumμ„ λ§λ“¤μ–΄μ„ ν•λ“μ½”λ”© ν•΄λ³΄κΈ°λ΅ ν•λ‹¤.  

```cs
public enum WorkType
{
	CompleteQuest
}

public class Work
{
	public WorkType workType;
	public int value;

	public float time;
	public float curTime = 0;

	public Work(WorkType workType, int value, float time)
	{
		this.workType = workType;
		this.value = value;
		this.time = time;
	}

	public void Tick(float tick)
	{
		curTime += tick;

		if (IsCompleted)
		{
			curTime = time;
		}
	}

	public bool IsCompleted => curTime >= time;
}
```

```cs
public void TickWorks()
{
	foreach (KeyValuePair<int, List<Work>> work in Works)
	{
		for (int i = work.Value.Count - 1; i >= 0; i--)
		{
			work.Value[i].Tick(TimeManager.Tick);
			if (work.Value[i].IsCompleted)
			{
				switch (work.Value[i].workType)
				{
					case WorkType.CompleteQuest:
						SOManager.Instance.QuestDataBuffer.RuntimeItems[work.Value[i].value].Complete();
						break;
					default:
						throw new ArgumentOutOfRangeException();
				}
				work.Value.RemoveAt(i);
			}
		}
	}
}
```

μ½”λ“κ°€ μ΄μμ§„ μ•λ‹¤.  
ν•λ“μ½”λ”©ν• μΌ μ΄λ²¤νΈλ¥Ό λ”°λ΅ ν•¨μλ΅ λΉΌλ©΄ μΆ€ κ΄μ°®μ•„μ§ κ²ƒ κ°™λ‹¤.  
`Work`λ¥Ό StructμΌλ΅ λ§λ“¤λ©΄ `TickWorks`μ—μ„ κ° `Work`λ¥Ό Tickμ‹ν‚¤λ” λ¶€λ¶„ λ•λ¬Έμ— λ” μ§€μ €λ¶„ν•΄μ Έμ„, Classλ΅ λ§λ“¤μ—λ‹¤.  

`Dictionary<int, List<Work>>`λ΅ μΌλ“¤μ„ κ΄€λ¦¬ν•λ‹¤.  
Keyκ°’μΌλ΅ μΈν•μ IDλ¥Ό, Valueκ°’μΌλ΅ ν•΄λ‹Ή μΈν•μ μΌ μ •λ³΄λ¥Ό μ €μ¥ν•λ‹¤.  

worksλ¥Ό ν”λ μ΄μ–΄λΈ” μΈν• μ© `Dictionary<int, Work>`, λ”λ―Έ μΈν• μ©`List<Work>`λ΅ κµ¬λ¶„μ‹ν‚¬κΉν•λ‹¤κ°€, λ°μ΄ν„° μ €μ¥/λ¶λ¬μ¤κΈ°κ°€ λ³µμ΅ν•΄μ§ κ²ƒ κ°™μ•„μ„ `Dictionary` ν•λ‚λ΅ ν†µμΌμ‹μΌ°λ‹¤.

κ·Έλμ„ μΈν•μ΄ ν• λ²μ— ν•λ‚μ μΌμ„ ν•  μ μμμ—λ„ μΌ μ •λ³΄λ¥Ό `List`λ΅ μ €μ¥ν•λ‹¤.  
λ‘κ°™μ€ IDλ¥Ό κ°€μ§€λ” λ”λ―ΈμΈν•μ μΌμ„ ν• λ²μ— μ²λ¦¬ν•κΈ° μ„ν•¨μ΄λ‹¤.  

AddWork κ°™μ€ ν•¨μμ—μ„ ν”λ μ΄μ–΄λΈ” μΈν•μ€ μΌμ„ ν•λ‚λ§ ν•  μ μλ„λ΅ λ³„κ°μ μ²λ¦¬λ¥Ό ν•΄μ•Όν•κΈ΄ ν•μ§€λ§,  
κ·Έκ±΄ ν”λ μ΄μ–΄λΈ” μΈν•κ³Ό λ”λ―Έ μΈν• μ»¨ν…μ΄λ„λ¥Ό λ¶„λ¦¬μ‹μΌλ„ λ§μ°¬κ°€μ§€λΌ λ…Όμ™Έλ΅ λ‘”λ‹¤.  

### π’Ώ κ±°λλ¦¬λ” μΈν• μ ν‘μ‹

μ΄λ¥Ό λ°”νƒ•μΌλ΅ κ±°λλ¦¬λ” μΈν• μλ¥Ό ν‘μ‹ν•΄λ³΄μ.  

```cs
private IEnumerator UpdateUI()
{
	WaitForSeconds wait = new(.1f);
	while (true)
	{
		int workableDollCount = SOManager.Instance.Dolls.RuntimeItems.Count;
		foreach (Doll doll in SOManager.Instance.Dolls.RuntimeItems)
		{
			if (doll.ID == Doll.DUMMY_ID)
				continue;

			if (workManager.DoseDollHaveWork(doll.ID))
				workableDollCount--;
		}

		if (workManager.Works.ContainsKey(Doll.DUMMY_ID))
			workableDollCount -= workManager.Works[Doll.DUMMY_ID].Count;

		text.text = $"{workableDollCount}/{SOManager.Instance.Dolls.RuntimeItems.Count} μΈν•";
		yield return wait;
	}
}
```

ν…μ¤νΈ ν•¨μλ¥Ό λ§λ“¤κ³  ν…μ¤νΈ ν•΄λ³΄μ.  
μ•„λλ” λ”λ―ΈμΈν•μ΄ 10μ΄μ μΌμ„ ν•λ„λ΅ ν•λ” ν…μ¤νΈμ½”λ“λ‹¤.  

```cs
[ContextMenu(nameof(TestWork))]
public void TestWork()
{
	WorkManager.AddWork(Doll.DUMMY_ID, new Work(WorkType.CompleteQuest, 0, 10));
}
```

{% include embed/youtube.html id='cVqG4oNABys' %}

μ μ‘λ™ν•λ‹¤.  

λ°μ΄ν„° μ €μ¥/λ¶λ¬μ¤κΈ°λ„ μ λ™μ‘ν•λ‹¤.  
μΌλ°μ μΈ SNG λ¥μ κ²μ„μ€ μ¤ν”„λΌμΈμ—λ„ μ‹κ°„μ΄ νλ¥΄μ§€λ§, μ΄ κ²μ„μ—μ„λ” Cult of the Lamb μ²λΌ κ²μ„μ— μ ‘μ†ν•΄ μμ„ λ•λ§ μ‹κ°„μ΄ νλ¥΄κ² ν•  κ²ƒμ΄λ‹¤.  

## π“€ λ§μ„ μλΆ°

---

μ΄μ  λ§μ„ μλΆ°λ¥Ό λ§λ“ λ‹¤.  

μ²μλ¶€ν„° λ§μ„ μλΆ°λ¥Ό κ°€μ§€κ³  μ‹μ‘ν•λ” κ²ƒμ€ μ–΄μƒ‰ν•  κ²ƒμ΄λ‹¤.  
μ£Όλ³€ λ§μ„μ—μ„ μ¨ NPCλ¥Ό λ§λ“¤κ³ , λ§μ„ μλΆ°λ¥Ό ν•λ‚ λ°›λ„λ΅ ν•λ©΄ μΆ‹μ„ κ²ƒ κ°™λ‹¤.  

### π’Ώ NPCλ΅λ¶€ν„° ν€μ¤νΈ λ°›κΈ°

NPCκ°€ ν€μ¤νΈλ¥Ό μ£ΌκΈ° μ„ν•΄μ„λ”, μ–΄λ–¤ ν€μ¤νΈλ¥Ό μ¤„μ§€ μ•κ³  μμ–΄μ•Όν•λ‹¤.  

NPC μ¤ν¬λ¦½ν„°λΈ” μ¤λΈμ νΈμ— `List<Quest>`λ¥Ό μƒλ΅ μ¶”κ°€ν•κ³ ,  
NPC UIλ¥Ό κ°±μ‹ ν•  λ•, NPCκ°€ ν€μ¤νΈλ¥Ό κ°€μ§€κ³  μμΌλ©΄ μ„ νƒμ§€λ΅ λ³΄μ—¬μ¤€λ‹¤.  

ν€μ¤νΈ μ„ νƒμ§€λ¥Ό μ„ νƒν–μ„ λ•,  

λ§μ•½ ν€μ¤νΈλ¥Ό λ°›μ§€ μ•μ€ μƒνƒλΌλ©΄ λ°›κ³ ,  
λ§μ•½ ν€μ¤νΈλ¥Ό λ°›μ•μ§€λ§ μ™„λ£ν•μ§€ λ»ν• μƒνƒλΌλ©΄ λ¬΄μ‹,  
λ§μ•½ ν€μ¤νΈλ¥Ό λ°›κ³  μ™„λ£ν• μƒνƒλΌλ©΄ λ³΄μƒμ„ λ°›λ„λ΅ ν•λ‹¤.  

μ΄λ° μƒνƒλ¥Ό ν‘ν„ν•κΈ° μ„ν•΄ ν€μ¤νΈ μ¤ν¬λ¦½ν„°λΈ” μ¤λΈμ νΈμ— `QuestType`μ„ μ¶”κ°€ν•λ‹¤.  

```cs
private void SelectQuest(int index)
{
	Quest quest = curNPCData.Quests[index];

	switch (quest.QuestState)
	{
		case QuestState.Locked:
			quest.Unlock();
			break;
		case QuestState.Unlocked:
			// λ€ν™”
			break;
		case QuestState.Completed:
			// λ³΄μƒ
			break;
		default:
			throw new ArgumentOutOfRangeException();
	}

	UIManager.Instance.SetOverlay(MPanelType.None);
}
```

λ‹¤λ§, λ§μ„ μλΆ°λ” κΈ°ν μƒ NPCμ—κ² μ§μ ‘ λ³΄μƒμ„ λ°›λ” λ°©μ‹μ΄ μ•„λ‹λ‹¤.  
λ•λ¬Έμ— `case QuestState.Completed` λΈ”λ­μ•μ— μ¶”κ°€μ μΈ μ΅°κ±΄μ„ λ‹¬μ•„μ¤„ ν•„μ”κ°€ μλ‹¤.  

```cs
public enum QuestType
{
	Normal,
	VillageQuest
}
```

```cs
case QuestState.Completed:
	if (quest.QuestType != QuestType.VillageQuest)
	{
		// λ³΄μƒ
	}
	break;
```

μ•„μ§ λ¨λ“  caseκ°€ λ‚΄λ¶€ κµ¬ν„μ€ μ•λμ§€λ§, μ „μ²΄μ μΈ νλ¦„μ€ λ§λ“¤μ–΄μ΅λ‹¤.  
μ¶”ν›„, κ°μ„ λ λ€ν™” μ‹μ¤ν…μ„ λ§λ“¤λ©΄μ„ ν•¨κ» κ°μ„ μ‹ν‚¬ κ²ƒ.  

{% include embed/youtube.html id='OfpkU1v3Gtg' %}

ν€μ¤νΈκ°€ μ λ°›μ•„μ§€λ” κ±Έ ν™•μΈν–μΌλ‹, μ΄μ  μλΆ° UIμ—μ„ λ§μ„ μλΆ°λ¥Ό μ™„λ£ν•λ” κΈ°λ¥μ„ λ§λ“¤μ–΄λ³΄μ.  

### π’Ώ λ§μ„ μλΆ° μ™„λ£ν•κΈ°

To Be Continued..  

### π’Ώ λ©”λ¨

λ©”μ΄ν”μ¤ν† λ¦¬ NPCμ²λΌ, ν€μ¤νΈ μƒν™©μ„ λ¨Έλ¦¬ μ„ μ•„μ΄μ½μΌλ΅ μ• μ μμΌλ©΄ μΆ‹μ„ κ²ƒ κ°™λ‹¤.  
