---
title: "🌓 Baekjoon 4179 - '불!'"
date: 2024-02-23. 08:31
last_modified_at: 2024-02-24. 18:25
categories: [⭐Computer, 🌓PS-Algorithm]
tags: [PS, Baekjoon, BFS, Breadth-First-Search]
---

## **💫 [문제](https://www.acmicpc.net/problem/4179)**

---

### **🫧 Example Input**

```cpp
4 4
####
#JF#
#..#
#..#
```

<br>
<!-- ---- ---- ---- ----  ---- ---- ---- ----  ---- ---- ---- ----  ---- ---- ---- ---- -->

### **🫧 Example Output**

```cpp
3
```

<br>
<!-- ---- ---- ---- ----  ---- ---- ---- ----  ---- ---- ---- ----  ---- ---- ---- ---- -->

## **💫 C++ 풀이**

---

```cpp
#include <iostream>
#include <algorithm>
#include <queue>

using namespace std;

char board[1005][1005];
int fireTime[1005][1005];
int jTime[1005][1005];

int dx[4]{1, -1, 0, 0};
int dy[4]{0, 0, 1, -1};

int main()
{
	ios::sync_with_stdio(false);
	cin.tie(nullptr);

	int r, c;
	cin >> r >> c;

	for (int i = 0; i < r; i++)
	{
		fill(jTime[i], jTime[i] + c, -1);
		fill(fireTime[i], fireTime[i] + c, -1);
	}

	queue<pair<int, int>> fq;
	queue<pair<int, int>> jq;

	for (int i = 0; i < r; i++)
	{
		string s;
		cin >> s;
		for (int j = 0; j < c; j++)
		{
			board[i][j] = s[j];

			if (s[j] == 'J')
			{
				jTime[i][j] = 0;
				jq.push({i, j});
			}
			else if (s[j] == 'F')
			{
				fireTime[i][j] = 0;
				fq.push({i, j});
			}
		}
	}

	// Fire
	while (fq.empty() == false)
	{
		pair<int, int> cur = fq.front();
		fq.pop();

		for (int k = 0; k < 4; k++)
		{
			int newX = cur.first + dx[k];
			int newY = cur.second + dy[k];

			if (newX < 0 || newX >= r || newY < 0 || newY >= c)
				continue;
			if ((board[newX][newY] == '#') || (fireTime[newX][newY] != -1))
				continue;

			fireTime[newX][newY] = fireTime[cur.first][cur.second] + 1;
			fq.push({newX, newY});
		}
	}

	// J
	while (jq.empty() == false)
	{
		pair<int, int> cur = jq.front();
		jq.pop();

		for (int k = 0; k < 4; k++)
		{
			int newX = cur.first + dx[k];
			int newY = cur.second + dy[k];

			if (newX < 0 || newX >= r || newY < 0 || newY >= c)
			{
				cout << jTime[cur.first][cur.second] + 1;
				return 0;
			}
			if ((board[newX][newY] != '.') || (jTime[newX][newY] != -1))
				continue;
			if ((fireTime[newX][newY] != -1) && (jTime[cur.first][cur.second] + 1 >= fireTime[newX][newY]))
				continue;

			jTime[newX][newY] = jTime[cur.first][cur.second] + 1;
			jq.push({newX, newY});
		}
	}

	cout << "IMPOSSIBLE" << '\n';
}
```

<br>
<!-- ---- ---- ---- ----  ---- ---- ---- ----  ---- ---- ---- ----  ---- ---- ---- ---- -->

## **💫 Memo**

---

- 원래 시도했던 풀이, 같은 큐에서 지훈과 불을 동시에 계산해보려고 했다

```cpp
#include <iostream>
#include <algorithm>
#include <queue>

using namespace std;

int board[1005][1005];

int dx[4]{1, -1, 0, 0};
int dy[4]{0, 0, 1, -1};

int main()
{
	ios::sync_with_stdio(false);
	cin.tie(nullptr);

	int r, c;
	cin >> r >> c;

	queue<pair<int, int>> q;

	for (int i = 0; i < r; i++)
		fill(board[i], board[i] + c, -1);

	const int FIRE = -2;
	const int WALL = -3;

	for (int i = 0; i < r; i++)
	{
		string s;
		cin >> s;
		for (int j = 0; j < c; j++)
		{
			if (s[j] == '#')
			{
				board[i][j] = WALL;
			}
			else if (s[j] == 'J')
			{
				board[i][j] = 0;
				q.push({i, j});
			}
			else if (s[j] == 'F')
			{
				board[i][j] = FIRE;
				q.push({i, j});
			}
		}
	}

	while (q.empty() == false)
	{
		pair<int, int> cur = q.front();
		q.pop();

		bool isJ = board[cur.first][cur.second] >= 0;

		for (int k = 0; k < 4; k++)
		{
			int newX = cur.first + dx[k];
			int newY = cur.second + dy[k];

			if (newX < 0 || newX >= r || newY < 0 || newY >= c)
				continue;
			if ((board[newX][newY] == WALL) || (board[newX][newY] == FIRE) || (isJ && board[newX][newY] != -1))
				continue;
			if (isJ && (newX == 0 || newX == r - 1 || newY == 0 || newY == c - 1))
			{
				cout << board[cur.first][cur.second] + 2;
				return 0;
			}

			board[newX][newY] = (isJ ? board[cur.first][cur.second] + 1 : FIRE);

			q.push({newX, newY});
		}
	}

	cout << "IMPOSSIBLE" << '\n';
}
```

- 이 풀이는 아래와 같이 불이 지훈 앞쪽이나 위쪽에 붙어있는 경우, 불이 지훈을 태워버리는 문제가 있었다.

```cpp
// Input
4 4
####
#FJ#
#..#
#..#

// Expected Output
3

// Output
IMPOSSIBLE
```

<br>
<!-- ---- ---- ---- ----  ---- ---- ---- ----  ---- ---- ---- ----  ---- ---- ---- ---- -->
