---
title: "MUdons 00 - ActiveToggle, ActiveList ì¶”ìƒí´ë˜ìŠ¤"
# description: ""
categories: [ğŸ“€Post, ğŸ«Project, ğŸ«Woodon]
tags: [Woodon]
image: "/assets/img/profile/ProfileImage_Transparent.png"

date: 2024-08-24. 01:18
# last_modified_at: 2024-08-24. 01:18
---

<https://github.com/Mascari4615/MUdons/commit/2763f45666b8930c75c905e4abb8944f262680fe>

## ğŸ“€ ë¨¸ë¦¬ê¸€

---

ì›ë˜ VRChat UdonSharpì—ì„œëŠ” ì¶”ìƒ í´ë˜ìŠ¤/ë©”ì„œë“œë¥¼ ì§€ì›í•˜ì§€ ì•Šì•˜ëŠ”ë°, í˜¹ì‹œ ì—…ë°ì´íŠ¸ê°€ ë˜ì—ˆë‚˜ ì‹¶ì–´ ì‹œë„í•´ë³´ë‹ˆ ì»´íŒŒì¼ë„ ì˜ ë˜ê³ , ì½”ë“œ ê·¸ëŒ€ë¡œ ë¹Œë“œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ë„ ë³„ë‹¤ë¥¸ ë¬¸ì œë„ ë³´ì´ì§€ ì•Šì•˜ë‹¤. ì–¸ì œë¶€í„°ì¸ê°€ ì§€ì›ë˜ê³  ìˆì—ˆë‚˜ë³´ë‹¤.  

ìƒì†ì€ ê¸°ì¡´ì—ë„ ê°€ëŠ¥í•˜ê¸´ í–ˆì§€ë§Œ, ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœ ê¹€ì—, ê·¸ë™ì•ˆ ê³ ì³ì•¼ê² ë‹¤ ìƒê°í•˜ê³  ìˆë˜ `ObjectActive`, `ObjectActiveList`, `CanvasGroupActive`, `CanvasGroupActiveList` ê·¸ë¦¬ê³  `CameraActive` ìš°ë™ì˜ ì½”ë“œ/êµ¬ì¡° ì¤‘ë³µë¥¼ ê°œì„ í•˜ê³ ì í–ˆë‹¤.  

## ğŸ“€ ë¬¸ì œ

---

ë¨¼ì € `~Active` ìš°ë™ë“¤ì˜ ëª©ì ì„ ì •ë¦¬í•´ë³¸ë‹¤.  
`~Active` ìš°ë™ë“¤ì€ íŠ¹ì • ìƒí™©ì— íŠ¹ì • ìš”ì†Œë¥¼ í™œì„±í™”/ë¹„í™œì„±í™”ì‹œí‚¤ëŠ” ê°„ë‹¨í•œ ëª©ì ì„ ê°€ì§€ê³  ìˆë‹¤.  

íŠ¹ì • ìš”ì†Œì˜ íƒ€ì…ì€ `GameObject`ê°€ ë  ìˆ˜ë„ ìˆê³ , `CanvasGroup`ì´ ë  ìˆ˜ë„ ìˆê³ , `Camera`ê°€ ë  ìˆ˜ë„ ìˆê³ , ë‚´ê°€ ë§Œë“  `MPickup`ì´ ë  ìˆ˜ë„ ìˆë‹¤.  
ì–´ì¨Œê±°ë‚˜ í™œì„±í™”/ë¹„í™œì„±í™”ì˜ ê°œë…ì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ê²ƒì´ë©´ ëœë‹¤.  

( ë‚´ê°€ ë§Œë“  `MPickup`ì€ ì—¬ëŸ¬ í”½ì—… ê´€ë ¨ ê¸°ëŠ¥ê³¼ í•¨ê»˜ `Enable` ê°œë…ì„ ê°€ì§€ê³  ìˆë‹¤, `Enable`ì˜ ê°’ì— ë”°ë¼ í•´ë‹¹ `MPickup`ì˜ ì½œë¼ì´ë”ë‚˜ ë©”ì‰¬ë Œë”ëŸ¬, ìì‹ ì˜¤ë¸Œì íŠ¸ë“¤ì´ í™œì„±í™”/ë¹„í™œì„±í™”ë˜ëŠ” ì‹ì´ë‹¤. )
( .. ì´ê±° ì™„ì „ `~Active` ê¸°ëŠ¥ì´ì–ì•„? ê·¸ë ‡ë‹¤, `MPickup`ì€ `~Acitve` ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆì—ˆë‹¤. ì¶”í›„ `MPickup`ì˜ ì´ëŸ° ë¶€ë¶„ë“¤ì€ `~Active` ìš°ë™ìœ¼ë¡œ ëŒ€ì²´í•´ë„ ì¢‹ì„ ê²ƒ ê°™ë‹¤. )

`~Active` ìš°ë™ì˜ ì¢…ë¥˜ëŠ” í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ë‰œë‹¤.  
**í† ê¸€**ê³¼ **ë¦¬ìŠ¤íŠ¸**.  

**í† ê¸€** ê¸°ëŠ¥ì€ ë§ê·¸ëŒ€ë¡œ ìš”ì†Œë“¤ì„ **í† ê¸€**, í™œì„±í™”/ë¹„í™œì„±í™”í•˜ëŠ” ê¸°ëŠ¥ì´ê³ ,  
**ë¦¬ìŠ¤íŠ¸** ê¸°ëŠ¥ì€ ì—¬ëŸ¬ ê°€ì§€ ìš”ì†Œë“¤ ì¤‘ì—ì„œ, íŠ¹ì • ìƒí™©ì— ë§ê²Œ íŠ¹ì • ìš”ì†Œë§Œì„ í™œì„±í™”ì‹œí‚¤ê³  ë‚˜ë¨¸ì§€ëŠ” ë¹„í™œì„±í™”ì‹œí‚¤ëŠ”, ì¡°ê¸ˆì€ ê¸°ëŠ¥ì´ ì¶”ê°€ëœ ìš°ë™ì´ë‹¤.  

ì´ëŸ° **í† ê¸€**, **ë¦¬ìŠ¤íŠ¸** ê¸°ëŠ¥ë“¤ì€, ë˜‘ê°™ì€ ì½”ë“œì— íƒ€ì…ë§Œ ë‹¤ë¥¸ ì±„ `ObjectActive`, `CanvasGroupActive`, `CameraActive` ê°™ì´ ì—¬ëŸ¬ ìš°ë™ìœ¼ë¡œ ì¡´ì¬í•˜ê³  ìˆë‹¤.  
ì½”ë“œê°€ ë§ì´ ì¤‘ë³µë˜ê³  ìˆì—ˆê³ , ì´ëŠ” ì•„ë¦„ë‹µì§€ ì•Šë‹¤ !  

## ğŸ“€ ì¶”ìƒí™”

---

ë˜‘ê°™ì€ ì½”ë“œì— íƒ€ì…ë§Œ ë‹¤ë¥´ë©´.. ì´ê±° `ì¼ë°˜í™”` ì–ì•„?  
í•˜ì§€ë§Œ ì—„ë°€íˆ ë”°ì ¸ë³´ë©´ ë˜‘ê°™ì€ ì½”ë“œëŠ” ì•„ë‹ˆì—ˆë‹¤.  

ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” íƒ€ì…ë“¤ì€ `ê°œë…ì ìœ¼ë¡œëŠ”` ëª¨ë‘ í™œì„±í™”/ë¹„í™œì„±í™” ìƒíƒœë¥¼ ê°€ì§€ê³  ìˆì§€ë§Œ, ì„œë¡œ ë‹¤ë¥¸ ëª¨ì–‘ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ( `GameObject.active`ì™€ `Camera.enabled`ëŠ” ë‹¤ë¥´ë‹¤ ! ) ì´ë¥¼ ì¼ë°˜í™”í•˜ê¸°ì—” ë¬´ë¦¬ê°€ ìˆë‹¤.  

ë˜ ì• ì´ˆì— Unity ì¸ìŠ¤í™í„°ì—ì„œ ìš”ì†Œë“¤ì˜ ì°¸ì¡°ë¥¼ ì§ì ‘ ë“±ë¡í•˜ëŠ” ê²ƒì´ ì „ì œë¼, í•˜ë‚˜ì˜ í´ë˜ìŠ¤/ë©”ì„œë“œì— ì—¬ëŸ¬ íƒ€ì…ì„ ìœ„í•œ ì¼ë°˜í™” ë©”ì„œë“œë¥¼ ë§Œë“¤ ìˆ˜ëŠ” ì—†ë‹¤.  
í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì— `GameObject`, `CanvasGroup`, `Camera` íƒ€ì…ì„ `Object`ë¡œ ë°›ì•„ë‚´ê±°ë‚˜ ì „ë¶€ í•˜ë‚˜í•˜ë‚˜ ë³€ìˆ˜ë¡œ ë§Œë“¤ ìˆ˜ëŠ” ì—†ìœ¼ë‹ˆê¹Œ..  

![ì§€ì›í•˜ì§€ ì•Šì•„](/assets/img/post/2024/240824_00.png)  
ì»´í¬ë„ŒíŠ¸ë“¤ì´ë¼ë„ [`Behaviour.enable`](https://docs.unity3d.com/ScriptReference/Behaviour.html)ë¥¼ ì¨ì„œ ì¼ë°˜í™”í•´ë³´ë ¤ê³  í–ˆëŠ”ë°, UdonSharpì—ì„œëŠ” `Behaviour.enabled`ì˜ `set`ì„ ì§€ì›í•˜ì§€ ì•Šì•˜ë‹¤.  

ê·¸ë˜ì„œ `~Active` ìš°ë™ë“¤ì˜ ê³µí†µëœ ê°œë…ê³¼ ê¸°ëŠ¥ì€ ë¯¸ë¦¬ êµ¬í˜„ë˜ì–´ ìˆì§€ë§Œ, í™œì„±í™”/ë¹„í™œì„±í™” ì²˜ë¦¬ëŠ” ì¶”ìƒí™” ë©”ì„œë“œë¡œ ë‚¨ê²¨ë‘” ì¶”ìƒí™” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ ,  
ì´ë¥¼ ê° íƒ€ì…ë§ˆë‹¤ ìƒì†ë°›ì•„ í™œì„±í™”/ë¹„í™œì„±í™” ìƒíƒœì— ë”°ë¼ ê° íƒ€ì… ë³„ ì²˜ë¦¬ë¥¼ êµ¬í˜„í•˜ë„ë¡ í–ˆë‹¤.  

## ğŸ“€ ì½”ë“œ - Core (`ActiveToggle`, `ActiveList`)

---

```cs
public abstract class ActiveToggle : MBase
{
	[Header("_" + nameof(ActiveToggle))]
	[SerializeField] private bool defaultActive;

	[Header("_" + nameof(ActiveToggle) + " - Options")]
	[SerializeField] private MBool mBool;

	private bool _active;
	public bool Active
	{
		get => _active;
		private set
		{
			_active = value;
			UpdateActive();
		}
	}

	private void Start()
	{
		Init();
	}

	private void Init()
	{
		SetActive(defaultActive);

		if (mBool != null)
		{
			mBool.RegisterListener(this, nameof(UpdateValueByMBool));
			UpdateValueByMBool();
		}

		UpdateActive();
	}

	protected abstract void UpdateActive();

	public void SetActive(bool newActive)
	{
		MDebugLog($"{nameof(SetActive)}({newActive})");

		if (mBool != null)
		{
			mBool.SetValue(newActive);
		}
		else
		{
			Active = newActive;
		}
	}

	public void UpdateValueByMBool()
	{
		if (mBool)
			Active = mBool.Value;
	}

	public void SetMBool(MBool mBool)
	{
		this.mBool = mBool;
		UpdateValueByMBool();
	}
}
```

```cs
public abstract class ActiveList : MBase
{
	[Header("_" + nameof(ActiveList))]
	[SerializeField] private int defaultValue;

	[Header("_" + nameof(ActiveList) + " - Options")]
	[SerializeField] protected MValue mValue;
	[SerializeField] protected ActiveListOption option;
	[SerializeField] protected int targetIndex = NONE_INT;

	private int _value;
	public int Value
	{
		get => _value;
		private set
		{
			_value = value;
			UpdateActive();
		}
	}

	private void Start()
	{
		Init();
	}

	private void Init()
	{
		SetValue(defaultValue);

		if (mValue != null)
		{
			InitMValueMinMax();
			mValue.RegisterListener(this, nameof(UpdateActiveByMValue));
		}

		UpdateActive();
	}

	/// <summary>
	/// ëŒ€ìƒì´ ë˜ëŠ” ìš”ì†Œë“¤ì˜ ìˆ˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ mValue.SetMinMaxValue
	/// </summary>
	protected abstract void InitMValueMinMax();

	/// <summary>
	/// ActiveListOptionì— ëŒ€í•˜ì—¬ ê° ì¼€ì´ìŠ¤ ë³„ë¡œ êµ¬í˜„
	/// </summary>
	/// <param name="value"></param>
	protected abstract void UpdateActive();

	public void SetValue(int newValue)
	{
		MDebugLog($"{nameof(SetValue)}({newValue})");
	
		if (mValue != null)
		{
			mValue.SetValue(newValue);
		}
		else
		{
			Value = newValue;
		}
	}

	public void UpdateActiveByMValue()
	{
		if (mValue)
			Value = mValue.Value;
	}

	public void SetMValue(MValue mValue)
	{
		this.mValue = mValue;
		InitMValueMinMax();
		UpdateActiveByMValue();
	}
}
```

## ğŸ“€ ì½”ë“œ - Impl (`ObjectActive`, `ObjectActiveList`)

---

```cs
public class ObjectActive : ActiveToggle
{
	[Header("_" + nameof(ObjectActive))]
	[SerializeField] private GameObject[] activeObjects;
	[SerializeField] private GameObject[] disableObjects;

	protected override void UpdateActive()
	{
		MDebugLog($"{nameof(UpdateActive)}");

		foreach (GameObject o in activeObjects)
			o.SetActive(Active);

		foreach (GameObject o in disableObjects)
			o.SetActive(!Active);
	}
}
```

```cs
public class ObjectActiveList : ActiveList
{
	[Header("_" + nameof(ObjectActiveList))]
	[SerializeField] private GameObject[] objectList;
	// [SerializeField] private Behaviour[] behaviours; // 240819 : U#ì—ì„œ .enabled setì„ ì§€ì›í•˜ì§€ ì•ŠìŒ

	protected override void InitMValueMinMax()
	{
		int maxLen = Mathf.Max(objectList.Length);
		mValue.SetMinMaxValue(0, maxLen);
	}

	protected override void UpdateActive()
	{
		MDebugLog($"{nameof(UpdateActive)}({Value})");

		switch (option)
		{
			// MValueë¥¼ ë¦¬ìŠ¤íŠ¸ì˜ ì¸ë±ìŠ¤ë¡œ ì‚¬ìš©í•  ë•Œ
			// ì˜ˆë¥¼ ë“¤ì–´, MValueê°€ 0ì¼ ë•Œ ë¦¬ìŠ¤íŠ¸ì˜ 0ë²ˆì§¸ ì˜¤ë¸Œì íŠ¸ë§Œ í™œì„±í™”, ë‚˜ë¨¸ì§€ëŠ” ë¹„í™œì„±í™”
			case ActiveListOption.UseMValueAsListIndex:
				for (int i = 0; i < objectList.Length; i++)
				{
					if (objectList[i])
						objectList[i].SetActive(i == Value);
				}
				break;

			// MValueë¥¼ íƒ€ê²Ÿ ì¸ë±ìŠ¤ë¡œ ì‚¬ìš©í•  ë•Œ
			// ì˜ˆë¥¼ ë“¤ì–´, MValueê°€ 0ì¼ ë•Œ íƒ€ê²Ÿ ì¸ë±ìŠ¤ê°€ 0ì´ë©´ ë¦¬ìŠ¤íŠ¸ì˜ ëª¨ë“  ì˜¤ë¸Œì íŠ¸ í™œì„±í™”, ì•„ë‹ˆë©´ ë¹„í™œì„±í™”
			case ActiveListOption.UseMValueAsTargetIndex:
				bool isTargetIndex = Value == targetIndex;

				foreach (GameObject obj in objectList)
				{
					if (obj)
						obj.SetActive(isTargetIndex);
				}
				break;
			
			default:
				MDebugLog($"{nameof(UpdateActive)}({Value}) - {option}, Invalid Option");
				break;
		}
	}
}
```

## ğŸ“€ ë§ê¼¬ë¦¬

---

`ObjectActiveList`ì˜ ê²½ìš°, í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•¨ì— ë”°ë¼ `GameObject` ë¿ë§Œ ì•„ë‹ˆë¼ `CanvasGroup`ê³¼ `MPickup`ë„ í•¨ê»˜ ë‹¤ë£¨ê²Œ ë˜ì—ˆëŠ”ë°, ì´ë²ˆì— êµ¬ì¡°ë¥¼ ë°”ê¾¸ë©´ì„œ `GameObject`ë§Œ ë‹¤ë£¨ë„ë¡ ìˆ˜ì •í–ˆë‹¤.  

`CanvasGroup`ì€ ë³„ë„ì˜ `CanvasGroupList`ê°€ ìˆìœ¼ë‹ˆ ì´ê²ƒìœ¼ë¡œ ëŒ€ì²´í•˜ë©´ ë˜ê³ , `MPickup`ì€ ë”± í•œ í”„ë¡œì íŠ¸ì—ì„œë§Œ ì‚¬ìš©í–ˆë˜ í„°ë¼, ë‹¤ì‹œ í•„ìš”í•˜ê²Œ ëœë‹¤ë©´ `CanvasGroupList`ì²˜ëŸ¼ ë³„ë„ì˜ ìš°ë™ì„ ìƒˆë¡œ ë§Œë“¤ì–´ì•¼ í•  ê²ƒ ê°™ë‹¤.  

ëŸ¬ë‚˜ì €ëŸ¬ë‚˜ ê°„ë‹¨í•œ ëª©ì ì„ ê°€ì§„ ìš°ë™ë“¤ì´ë¼, í”„ë¡œì íŠ¸ë§ˆë‹¤ ê·¸ë•Œê·¸ë•Œ ìƒˆë¡œ ë§Œë“¤ì–´ë„ ë˜ê¸´ í•˜ì§€ë§Œ..  
ìì£¼ ì“°ì´ëŠ” ê¸°ëŠ¥ì€ ê³„ì† ë‹¤ì‹œ ë§Œë“œëŠ” ê²ƒ ë³´ë‹¤ëŠ” í•œ ë²ˆ ì˜ ë§Œë“¤ì–´ì„œ ì¬ì‚¬ìš©í•˜ëŠ”ê²Œ ì‘ì—… íš¨ìœ¨ì´ ì¢‹ë‹¤ê³  ìƒê°í•´ì„œ ì´ë ‡ê²Œ ì‘ì€ ëª¨ë“ˆë“¤ì„ í•˜ë‚˜í•˜ë‚˜ ë§Œë“¤ê¸° ì‹œì‘í–ˆë‹¤.  

ê·¸ëŸ°ë° ê·¸ë ‡ê²Œ ë§Œë“  ê¸°ëŠ¥ë“¤ì„ ë‹¤ì‹œ ë””ë²¨ë¡­í•˜ëŠ” ê³¼ì •ì—ì„œ, ì´ì „ í”„ë¡œì íŠ¸ë“¤ì˜ ìš°ë™ ìƒ˜í”Œë“¤ë„ í•¨ê»˜ ìœ ì§€ë³´ìˆ˜í•˜ê²Œ ë˜ëŠ”ë°, ì´ëŸ¬ë‚˜ ê·¸ë•Œê·¸ë•Œ ë˜‘ê°™ì€ ê¸°ëŠ¥ì„ ìƒˆë¡œ ë§Œë“œëŠ” ê²ƒ ë³´ë‹¤ ë” ë§ì€ ì‹œê°„ì´ ì“°ê²Œ ë˜ëŠ” ê²ƒ ê°™ê¸°ë„ í•˜ë‹¤.  

ë³´í†µì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì²˜ëŸ¼ êµ¬ì¡°ê°€ ì•ˆì •í™”ë˜ì–´, ë‹¤ë¥¸ ì‚¬ëŒë“¤ë„ êµ¬ì¡°ë³€ê²½ ê±±ì •ì—†ì´ í¸íˆ ì“¸ ìˆ˜ ìˆê³ , ë‚˜ëŠ” ìƒˆ ê¸°ëŠ¥ ê°œë°œì— ë”ìš± ì‹ ê²½ì“¸ ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ë‹¤.  

`v1.0.0`ì„ í–¥í•´.  

![To be Continued](/assets/img/post/embed/ToBeContinued.png)  
